import Head from "next/head";
import Image from "next/image";
import { Inter } from "@next/font/google";
import styles from "../styles/Home.module.css";
import Navbar from "../components/navbar";
import Profile from "../components/profile";
import { Badge, Box, Stack, Flex } from "@chakra-ui/react";
import Education from "./education";
import EducationComp from "../components/EducationComp";
import ProjectsCard from "../components/ProjectsCard";

const inter = Inter({ subsets: ["latin"] });

export default function Home({ proj, info }) {
  let items = proj.items;
  console.log(info);
  return (
    <>
      <Head>
        <title>Create Next App</title>
        <meta name="description" content="Generated by create next app" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <link rel="icon" href="/favicon.ico" />
      </Head>
      <div style={{ padding: "10px" }}>
        <Navbar />
        <Flex>
          <Stack width={"320px"}>
            <Profile {...info} />
            <Box
              bg={("white", "gray.900")}
              boxShadow={"2xl"}
              rounded={"lg"}
              p={6}
              textAlign={"center"}
            >
              <Badge style={{ margin: "8px" }}>HTML</Badge>
              <Badge style={{ margin: "8px" }}>CSS</Badge>
              <Badge style={{ margin: "8px" }}>JavaScript</Badge>
              <Badge style={{ margin: "8px" }}>React</Badge>
              <Badge style={{ margin: "8px" }}>node.js</Badge>
              <Badge style={{ margin: "8px" }}>next.js</Badge>
              <Badge style={{ margin: "8px" }}>Chakra-ui</Badge>
              <Badge style={{ margin: "8px" }}>Storybook</Badge>
              <Badge style={{ margin: "8px" }}>MongoDB</Badge>
            </Box>
            <EducationComp />
          </Stack>
          <ProjectsCard items={items} />
        </Flex>
      </div>
    </>
  );
}

export async function getStaticProps() {
  let res1 = await fetch(
    "https://api.github.com/search/repositories?q=user:DeshmukhMandar3+fork:true&sort=updated&per_page=10&type=Repositories"
  );
  let data1 = await res1.json();
  let res2 = await fetch("https://api.github.com/users/DeshmukhMandar3");
  let data2 = await res2.json();

  return {
    props: {
      proj: data1,
      info: data2,
    },
  };
}
